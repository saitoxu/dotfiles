#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define MAX 256
#define QUANTITY 50
#define INPUT_MIN 1
#define INPUT_MAX 9999

void init(int x[]);
int input(int x[], char a[]);
void bubble_sort(int x[], int d);
void output(int x[], int a);
int main()
{

  int x[MAX], k;
  char a[MAX];

  init(x);

  k = input(x, a);

  bubble_sort(x, k);

  printf("ソート結果を表示します\n\n");

  output(x, k);

  return 0;

}

//初期化処理
void init(int x[]){
  int i=0;
  for(i=0;i<QUANTITY;i++){
    x[i] = 0;
  }
}

//入力処理
int input(int x[], char a[]){
  int i=0, b=0, c=0;
  char d[MAX];
  printf("-1を入力すると途中でソーティングに移ります\n");
  for(i=0;i<QUANTITY;i++){
    printf("自然数を入力してください（ただし1から9999までの間）\n");
    fgets(a,MAX,stdin);
    b = atoi(a);
    c = sprintf(d,"%d",b);
    if(strlen(a) - 1 == c){
      if(b >= INPUT_MIN && b <= INPUT_MAX){
        x[i] = b;
      }else if(b == -1){
        printf("入力を終了します\n");
        break;
      }else{
        printf("入力が不正です\n");
        i--;
      }
    }else{
      printf("入力が不正です\n");
      i--;
    }
  }
  return --i;
}

//ソーティングそのもの
void bubble_sort(int x[], int d){
  int a, b, c;
  for(a=0;a<d;a++){
    for(b=0;b<d;b++){
      if(x[b] > x[b+1]){
        c = x[b];
        x[b] = x[b+1];
        x[b+1] = c;
      }
    }
  }
}

//出力処理
void output(int x[], int a){
  int i;
  for(i=0;i<a+1;i++){
    printf("%5d",x[i]);
    if(i%10 == 9){
      printf("\n");
    }
  }
  printf("\n");
}
